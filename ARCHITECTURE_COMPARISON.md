# Supervisor-ME æž¶æž„æ–¹æ¡ˆå¯¹æ¯”

## æ–¹æ¡ˆä¸€ï¼šå½“å‰åŒçª—å£æ–‡ä»¶ç›‘æŽ§æ–¹æ¡ˆ

```ascii
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¼€å‘è€…è§†è§’                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Window 1        â”‚  â”‚   Window 2        â”‚
        â”‚   [Worker]        â”‚  â”‚   [Supervisor]    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                   â”‚
                    â–¼                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  worker-wrapper   â”‚  â”‚ session-monitor   â”‚
        â”‚                   â”‚  â”‚                   â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚ Claude Code â”‚ â”‚  â”‚  â”‚  File Watch â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚         â”‚         â”‚  â”‚         â”‚         â”‚
        â”‚         â–¼         â”‚  â”‚         â–¼         â”‚
        â”‚   Write Session   â”‚  â”‚   Read Session    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                   â”‚
                    â–¼                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     .super/worker-session.log        â”‚
        â”‚   [å®žæ—¶å†™å…¥]          [è½®è¯¢è¯»å–]      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ—¶åºæµç¨‹:
1. ç”¨æˆ· â†’ Worker: è¾“å…¥ä»»åŠ¡
2. Claude â†’ Session Log: å†™å…¥æ“ä½œè®°å½•
3. Monitor â†’ Session Log: æ¯100msè½®è¯¢
4. Monitor: æ£€æµ‹åˆ°å®Œæˆæ¨¡å¼
5. Monitor â†’ Tests: è¿è¡Œæµ‹è¯•éªŒè¯
6. Monitor â†’ Inquiries: ç”Ÿæˆæ™ºèƒ½æé—®
7. Supervisor â†’ ç”¨æˆ·: æ˜¾ç¤ºéªŒè¯ç»“æžœ
```

### ä¼˜ç‚¹
- å®Œå…¨è§£è€¦ï¼ŒWorker å’Œ Supervisor ç‹¬ç«‹è¿è¡Œ
- å¯ä»¥éšæ—¶å¯åŠ¨/åœæ­¢ Supervisor
- ä¿ç•™å®Œæ•´ä¼šè¯åŽ†å²ä¾›åŽç»­åˆ†æž
- ä¸å½±å“ Claude Code åŽŸç”Ÿè¡Œä¸º

### ç¼ºç‚¹
- éœ€è¦æ‰‹åŠ¨å¯åŠ¨ä¸¤ä¸ªçª—å£
- åŸºäºŽè½®è¯¢ï¼Œæœ‰å»¶è¿Ÿï¼ˆ100ms-1sï¼‰
- éœ€è¦è§£æžæ—¥å¿—è¯†åˆ«æ¨¡å¼ï¼ˆå¯èƒ½è¯¯åˆ¤ï¼‰
- æ–‡ä»¶ I/O å¼€é”€

---

## æ–¹æ¡ˆäºŒï¼šHooks æ–¹æ¡ˆï¼ˆprompt-post-hookï¼‰

```ascii
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¼€å‘è€…è§†è§’                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Claude Code CLI  â”‚  â”‚  ç›‘æŽ§è¾“å‡º(å¯é€‰)   â”‚
        â”‚                   â”‚  â”‚                   â”‚
        â”‚  ç”¨æˆ· â†â†’ Claude   â”‚  â”‚   tail -f logs    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         Claude Code å†…éƒ¨             â”‚
        â”‚                                       â”‚
        â”‚  ä»»åŠ¡æ‰§è¡Œ â†’ å®Œæˆ â†’ ç­‰å¾…ç”¨æˆ·è¾“å…¥      â”‚
        â”‚            â”‚                          â”‚
        â”‚            â–¼                          â”‚
        â”‚    [prompt-post-hook è§¦å‘]           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      supervisor-verify.sh             â”‚
        â”‚                                       â”‚
        â”‚  1. åˆ†æžåˆšå®Œæˆçš„ä»»åŠ¡                 â”‚
        â”‚  2. è¿è¡Œç›¸å…³æµ‹è¯•                     â”‚
        â”‚  3. ç”ŸæˆéªŒè¯æŠ¥å‘Š                     â”‚
        â”‚  4. æ˜¾ç¤ºç»™ç”¨æˆ·                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è§¦å‘æ—¶æœº:
â€¢ ç”¨æˆ·è¾“å…¥ä»»åŠ¡ â†’ Claude æ‰§è¡Œ
â€¢ Claude å®Œæˆ todo 1 â†’ åœä¸‹ç­‰å¾… â†’ [Hook è§¦å‘] â†’ éªŒè¯
â€¢ ç”¨æˆ·ç¡®è®¤ç»§ç»­ â†’ Claude æ‰§è¡Œ todo 2
â€¢ Claude å®Œæˆ todo 2 â†’ åœä¸‹ç­‰å¾… â†’ [Hook è§¦å‘] â†’ éªŒè¯
â€¢ ç”¨æˆ·æŒ‰ ESC ä¸­æ–­ â†’ [Hook è§¦å‘] â†’ çŠ¶æ€æ£€æŸ¥
â€¢ Claude å®Œæˆæ‰€æœ‰ä»»åŠ¡ â†’ [Hook è§¦å‘] â†’ å…¨é¢éªŒè¯
```

### ä¼˜ç‚¹
- å•çª—å£æ“ä½œï¼Œç”¨æˆ·ä½“éªŒç®€å•
- åŒæ­¥è§¦å‘ï¼Œé›¶å»¶è¿Ÿ
- ç²¾å‡†è§¦å‘æ—¶æœºï¼ˆä»»åŠ¡å®Œæˆç‚¹ï¼‰
- æ— æ–‡ä»¶è½®è¯¢å¼€é”€
- åŽŸç”Ÿé›†æˆï¼Œæ›´ç¨³å®š

### ç¼ºç‚¹
- éœ€è¦é…ç½® ~/.claude/settings.json
- Hook æ‰§è¡Œä¼šçŸ­æš‚é˜»å¡žï¼ˆå¯ä¼˜åŒ–ä¸ºåŽå°ï¼‰
- ä¾èµ– Claude Code çš„ Hook æœºåˆ¶

---

## æ–¹æ¡ˆä¸‰ï¼šSession æ–‡ä»¶ç›‘æŽ§æ–¹æ¡ˆ

```ascii
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¼€å‘è€…è§†è§’                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         Claude Code CLI               â”‚
        â”‚                                       â”‚
        â”‚    ç”¨æˆ· â†â†’ Claude (æ­£å¸¸äº¤äº’)          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   ~/.claude/project/{session-id}/    â”‚
        â”‚                                       â”‚
        â”‚   â”œâ”€â”€ messages.jsonl  [å¯¹è¯åŽ†å²]     â”‚
        â”‚   â”œâ”€â”€ tools.jsonl     [å·¥å…·è°ƒç”¨]     â”‚
        â”‚   â””â”€â”€ state.json      [ä¼šè¯çŠ¶æ€]     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   æ–‡ä»¶ç³»ç»Ÿç›‘æŽ§     â”‚
                    â”‚   (fswatch/inotify)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      supervisor-daemon                â”‚
        â”‚                                       â”‚
        â”‚  1. ç›‘æŽ§ session æ–‡ä»¶å˜åŒ–            â”‚
        â”‚  2. è§£æž JSONL æ ¼å¼æ•°æ®              â”‚
        â”‚  3. æ£€æµ‹ä»»åŠ¡å®Œæˆæ¨¡å¼                  â”‚
        â”‚  4. è§¦å‘éªŒè¯å’Œæµ‹è¯•                    â”‚
        â”‚  5. ç”ŸæˆæŠ¥å‘Š(å¦å­˜)                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŽå°å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼:
â€¢ Supervisor ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œ
â€¢ è‡ªåŠ¨æ£€æµ‹æ–° session åˆ›å»º
â€¢ å®žæ—¶ç›‘æŽ§æ‰€æœ‰ Claude ä¼šè¯
â€¢ éªŒè¯ç»“æžœå†™å…¥ç‹¬ç«‹æ—¥å¿—æ–‡ä»¶
â€¢ ç”¨æˆ·å¯éšæ—¶æŸ¥çœ‹éªŒè¯æŠ¥å‘Š
```

### ä¼˜ç‚¹
- å®Œå…¨é€æ˜Žï¼Œä¸å½±å“ Claude äº¤äº’
- å¯ä»¥ç›‘æŽ§æ‰€æœ‰åŽ†å²ä¼šè¯
- ç»“æž„åŒ–æ•°æ®ï¼ˆJSONLï¼‰ï¼Œè§£æžå‡†ç¡®
- å¯å®žçŽ°é«˜çº§åˆ†æžï¼ˆè·¨ä¼šè¯å­¦ä¹ ï¼‰

### ç¼ºç‚¹
- éœ€è¦äº†è§£ Claude å†…éƒ¨æ–‡ä»¶æ ¼å¼
- æ–‡ä»¶æ ¼å¼å¯èƒ½å˜åŒ–ï¼ˆç‰ˆæœ¬ä¾èµ–ï¼‰
- éœ€è¦æŒç»­è¿è¡Œå®ˆæŠ¤è¿›ç¨‹
- å¤æ‚åº¦æœ€é«˜

---

## æ–¹æ¡ˆå¯¹æ¯”è¡¨

| ç‰¹æ€§ | åŒçª—å£ç›‘æŽ§ | Hooksæ–¹æ¡ˆ | Sessionç›‘æŽ§ |
|------|-----------|-----------|-------------|
| **ç”¨æˆ·ä½“éªŒ** | éœ€è¦ä¸¤ä¸ªçª—å£ | å•çª—å£ | å®Œå…¨é€æ˜Ž |
| **å®žæ—¶æ€§** | 100mså»¶è¿Ÿ | å®žæ—¶ | å®žæ—¶ |
| **å‡†ç¡®æ€§** | æ¨¡å¼åŒ¹é… | ç²¾å‡†è§¦å‘ | ç»“æž„åŒ–æ•°æ® |
| **æ€§èƒ½å¼€é”€** | æ–‡ä»¶è½®è¯¢ | æœ€å° | æ–‡ä»¶ç›‘æŽ§ |
| **å®žçŽ°å¤æ‚åº¦** | ä¸­ç­‰ | ç®€å• | å¤æ‚ |
| **å¯é æ€§** | ä¸­ç­‰ | é«˜ | å–å†³äºŽæ ¼å¼ç¨³å®šæ€§ |
| **ç»´æŠ¤æˆæœ¬** | ä½Ž | æœ€ä½Ž | é«˜ |
| **æ‰©å±•æ€§** | ä¸­ç­‰ | å—é™äºŽHooks | æœ€é«˜ |

---

## æŽ¨èæ–¹æ¡ˆï¼ˆåŸºäºŽæœ€æ–°ç†è§£ï¼‰

### æ ¸å¿ƒç†å¿µè½¬å˜
**ESC ä¸­æ–­ = ç”¨æˆ·ä¸»åŠ¨æŽ§åˆ¶ï¼Œä¸æ˜¯é”™è¯¯**
- ç”¨æˆ·æŒ‰ ESC æ˜¯ä¸ºäº†æŽ¥ç®¡æŽ§åˆ¶ï¼Œä¸éœ€è¦éªŒè¯
- åªæœ‰ Claude è®¤ä¸º"å®Œæˆ"çš„ä»»åŠ¡æ‰éœ€è¦éªŒè¯
- Stop hook ä¸åœ¨ ESC æ—¶è§¦å‘ï¼Œè¿™æ˜¯ç‰¹æ€§è€Œéžç¼ºé™·

### çŸ­æœŸï¼ˆMVPï¼‰ï¼š**ç®€åŒ–çš„ Hooks æ–¹æ¡ˆ** â­
```json
{
  "hooks": {
    "Stop": "~/supervisor-me-mvp/hooks/verify-completion.sh",
    "PostToolUse": {
      "Write": "~/supervisor-me-mvp/hooks/syntax-check.sh",
      "Edit": "~/supervisor-me-mvp/hooks/syntax-check.sh"
    },
    "UserPromptSubmit": "~/supervisor-me-mvp/hooks/log-intent.sh"
  }
}
```

**ç†ç”±**ï¼š
1. Stop hook ç²¾å‡†éªŒè¯ Claude å®Œæˆçš„ä»»åŠ¡
2. ESC ä¸­æ–­æ—¶ä¸è§¦å‘éªŒè¯ï¼ˆç¬¦åˆç”¨æˆ·æ„å›¾ï¼‰
3. PostToolUse æä¾›å³æ—¶è¯­æ³•æ£€æŸ¥
4. UserPromptSubmit è®°å½•ç”¨æˆ·æ„å›¾ç”¨äºŽå­¦ä¹ 

### é•¿æœŸï¼ˆé«˜çº§åŠŸèƒ½ï¼‰ï¼š**æ··åˆæ–¹æ¡ˆ**
- ä½¿ç”¨ Hooks è¿›è¡Œå®žæ—¶éªŒè¯ï¼ˆä¸»è·¯å¾„ï¼‰
- ä½¿ç”¨ Session ç›‘æŽ§è¿›è¡ŒåŽ†å²åˆ†æžå’Œå­¦ä¹ 
- æä¾›å¯é€‰çš„åŒçª—å£ç›‘æŽ§æ¨¡å¼ç”¨äºŽè°ƒè¯•

---

## éªŒè¯å“²å­¦ï¼šä»€ä¹ˆéœ€è¦éªŒè¯ï¼Œä»€ä¹ˆä¸éœ€è¦

### âœ… éœ€è¦éªŒè¯çš„åœºæ™¯
1. **Claude è¯´"å®Œæˆäº†"**ï¼ˆStop hook è§¦å‘ï¼‰
   - éªŒè¯ï¼šä»»åŠ¡æ˜¯å¦çœŸçš„å®Œæˆ
   - éªŒè¯ï¼šä»£ç æ˜¯å¦èƒ½è¿è¡Œ
   - éªŒè¯ï¼šæµ‹è¯•æ˜¯å¦é€šè¿‡

2. **Claude åˆ›å»º/ä¿®æ”¹æ–‡ä»¶**ï¼ˆPostToolUse è§¦å‘ï¼‰
   - éªŒè¯ï¼šè¯­æ³•æ˜¯å¦æ­£ç¡®
   - éªŒè¯ï¼šæ˜¯å¦å¼•å…¥æ˜Žæ˜¾é”™è¯¯

3. **Claude æ‰§è¡Œé‡è¦æ“ä½œ**
   - éªŒè¯ï¼šæ•°æ®åº“è¿ç§»æ˜¯å¦æˆåŠŸ
   - éªŒè¯ï¼šéƒ¨ç½²æ˜¯å¦æ­£å¸¸

### âŒ ä¸éœ€è¦éªŒè¯çš„åœºæ™¯
1. **ç”¨æˆ·æŒ‰ ESC ä¸­æ–­**
   - åŽŸå› ï¼šç”¨æˆ·ä¸»åŠ¨æŽ§åˆ¶ï¼ŒçŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆ
   - å“åº”ï¼šè®°å½•ä½†ä¸éªŒè¯

2. **éƒ¨åˆ†å®Œæˆçš„ä»»åŠ¡**
   - åŽŸå› ï¼šç”¨æˆ·å¯èƒ½æ”¹å˜ä¸»æ„
   - å“åº”ï¼šä¿æŒçŽ°çŠ¶ï¼Œç­‰å¾…æ–°æŒ‡ä»¤

3. **ç”¨æˆ·å¿«é€Ÿåˆ‡æ¢ä»»åŠ¡**
   - åŽŸå› ï¼šæŽ¢ç´¢æ€§å·¥ä½œçš„æ­£å¸¸æ¨¡å¼
   - å“åº”ï¼šè·Ÿéšç”¨æˆ·èŠ‚å¥

### ðŸŽ¯ æ ¸å¿ƒåŽŸåˆ™
**éªŒè¯æ˜¯ä¸ºäº†å¸®åŠ©ï¼Œä¸æ˜¯ç›‘ç£**
- å½“ Claude è®¤ä¸ºå®Œæˆæ—¶ï¼Œå¸®ç”¨æˆ·ç¡®è®¤è´¨é‡
- å½“ç”¨æˆ·æŽ¥ç®¡æ—¶ï¼Œé€€åˆ°åŽå°ä¸å¹²æ‰°
- éªŒè¯ç»“æžœæ˜¯å»ºè®®ï¼Œä¸æ˜¯å¼ºåˆ¶

---

## å®žæ–½å»ºè®®

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ Hooksï¼ˆä¸“æ³¨å®ŒæˆéªŒè¯ï¼‰
1. å®žçŽ° Stop hook - ä»…åœ¨ Claude å®Œæˆä»»åŠ¡æ—¶éªŒè¯
2. PostToolUse hooks - å¿«é€Ÿè¯­æ³•æ£€æŸ¥
3. UserPromptSubmit - è®°å½•ç”¨æˆ·æ„å›¾

### ç¬¬äºŒé˜¶æ®µï¼šæ™ºèƒ½éªŒè¯
1. Stop hook ä¸­æ ¹æ®ä»»åŠ¡ç±»åž‹é€‰æ‹©éªŒè¯ç­–ç•¥
2. æž„å»º"å®Œæˆæ ‡å‡†"åº“ï¼ˆä»€ä¹ˆç®—çœŸæ­£å®Œæˆï¼‰
3. æ™ºèƒ½åˆ¤æ–­æ˜¯å¦éœ€è¦æ·±åº¦éªŒè¯

### ç¬¬ä¸‰é˜¶æ®µï¼šç”¨æˆ·æ„å›¾å­¦ä¹ 
1. åˆ†æž UserPromptSubmit æ—¥å¿—ç†è§£ç”¨æˆ·æ¨¡å¼
2. ESC åŽçš„æ–°æŒ‡ä»¤åˆ†æžï¼ˆç”¨æˆ·ä¸ºä»€ä¹ˆä¸­æ–­ï¼‰
3. ä¼˜åŒ–éªŒè¯ç­–ç•¥ï¼Œå‡å°‘ä¸å¿…è¦çš„æ£€æŸ¥

---

## è¿ç§»è·¯å¾„

ä»Žå½“å‰æ–¹æ¡ˆè¿ç§»åˆ° Hooks æ–¹æ¡ˆï¼š

```bash
# 1. ä¿ç•™çŽ°æœ‰ä»£ç ä½œä¸ºå¤‡é€‰
mv lib/session-monitor.js lib/legacy/
mv lib/worker-wrapper.js lib/legacy/

# 2. åˆ›å»º Hooks è„šæœ¬
mkdir -p .claude/hooks
cat > .claude/hooks/stop.sh << 'EOF'
#!/bin/bash
# Claude å®Œæˆä»»åŠ¡æ—¶çš„éªŒè¯
node lib/verify-completion.js "$@"
EOF

cat > .claude/hooks/post-tool.sh << 'EOF'
#!/bin/bash
# å·¥å…·ä½¿ç”¨åŽçš„å¿«é€Ÿæ£€æŸ¥
node lib/quick-check.js "$@"
EOF

# 3. é…ç½®é¡¹ç›®çº§ Claude hooks
cat > .claude/settings.json << 'EOF'
{
  "hooks": {
    "Stop": ".claude/hooks/stop.sh",
    "PostToolUse": {
      "Write": ".claude/hooks/post-tool.sh",
      "Edit": ".claude/hooks/post-tool.sh"
    },
    "UserPromptSubmit": ".claude/hooks/log-intent.sh"
  }
}
EOF

# 4. é‡ç”¨çŽ°æœ‰éªŒè¯é€»è¾‘
# lib/supervisor-verify.js å¯ä»¥é‡ç”¨ï¼š
# - InquiryGenerator (æ™ºèƒ½æé—®)
# - TestRunner (æµ‹è¯•æ‰§è¡Œ)  
# - ProjectAnalyzer (é¡¹ç›®åˆ†æž)
```

è¿™æ ·å¯ä»¥å¹³æ»‘è¿‡æ¸¡ï¼Œä¿ç•™å·²æœ‰æŠ•èµ„çš„åŒæ—¶èŽ·å¾—æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚